@import '../../styles/common'

.#{$cui-conf-globalPrefix}layout-chrome
	$layout-chrome-bar-width-aspect: 0.333
	--layout-chrome-bar-width: #{100vw * $layout-chrome-bar-width-aspect}

	align-items: stretch
	color: var(--cui-color--medium)
	display: flex
	flex-direction: column
	min-height: 100vh

	&.view-no-bar
		--layout-chrome-bar-width: 0px

	&-bar,
	&-body
		--cui-layout-chrome-padding-bottom: calc(var(--cui-padding) + var(--cui-edge-offset-bottom) + env(safe-area-inset-bottom, 0em))
		--cui-layout-chrome-padding-left: calc(var(--cui-screen-padding-horizontal) + var(--cui-edge-offset-left) + env(safe-area-inset-left, 0em))
		--cui-layout-chrome-padding-right: calc(var(--cui-screen-padding-horizontal) + var(--cui-edge-offset-right) + env(safe-area-inset-right, 0em))
		--cui-layout-chrome-padding-top: calc(var(--cui-padding) + var(--cui-edge-offset-top) + env(safe-area-inset-top, 0em))

	&-body
		--cui-layout-page-padding-bottom: calc(var(--cui-padding, 0em) + var(--cui-edge-offset-bottom, 0em) + env(safe-area-inset-bottom, 0em))
		--cui-layout-page-padding-left: calc(var(--cui-screen-padding-horizontal, 0em) + var(--cui-edge-offset-left, 0em) + env(safe-area-inset-left, 0em))
		--cui-layout-page-padding-right: calc(var(--cui-screen-padding-horizontal, 0em) + var(--cui-edge-offset-right, 0em) + env(safe-area-inset-right, 0em))
		--cui-layout-page-padding-top: calc(var(--cui-padding, 0em) + var(--cui-edge-offset-top, 0em) + env(safe-area-inset-top, 0em))
		--cui-layout-page-visible-width: calc(100vw - var(--layout-chrome-bar-width, 0))

		--cui-layout-section-padding-bottom: var(--cui-layout-page-padding-bottom)
		--cui-layout-section-padding-left: calc(var(--cui-layout-page-padding-left) - var(--cui-edge-offset-left, 0em))
		--cui-layout-section-padding-right: calc(var(--cui-layout-page-padding-right) - var(--cui-edge-offset-right, 0em))
		--cui-layout-section-padding-top: var(--cui-layout-page-padding-top)
		--cui-layout-section-gap: calc(4 * var(--cui-gap))

	&-bar
		background: var(--cui-background-color)
		display: flex
		flex-direction: column
		height: 100vh
		left: 0
		max-height: 100vh
		max-width: $breakpoint-max-xsmall
		position: sticky
		top: 0
		z-index: 1
	&-bar-header
		display: flex
		flex-direction: row
		gap: calc(var(--cui-gap) * 2)
		justify-content: space-between
		padding-bottom: var(--cui-layout-chrome-padding-bottom)
		padding-left: var(--cui-layout-chrome-padding-left)
		padding-right: var(--cui-layout-chrome-padding-right)
		padding-top: var(--cui-layout-chrome-padding-top)
		position: relative
	&-bar-body
		flex-grow: 1
		overflow-y: auto
		position: relative
		transition: border-color var(--cui-transition-duration)
		&-scrolled-indicator
			content: ""
			display: block
			border-top: var(--cui-control-border-width, 1px) solid transparent
			position: sticky
			left: 0
			right: 0
			top: 0
			&.is-scrolled
				border-top-color: var(--cui-color--lower)
	&-bar-footer
		align-items: stretch
		border-top: var(--cui-control-border-width, 1px) solid var(--cui-color--lower)
		display: flex
		flex-direction: column
		padding-bottom: var(--cui-layout-chrome-padding-bottom)
		padding-left: var(--cui-layout-chrome-padding-left)
		padding-right: var(--cui-layout-chrome-padding-right)
		padding-top: var(--cui-layout-chrome-padding-top)
	&-bar-switchers
		margin-top: calc(-1* var(--cui-padding) / 2)
		padding-bottom: calc(var(--cui-padding) / 2)
		padding-left: var(--cui-layout-chrome-padding-left)
		padding-right: var(--cui-layout-chrome-padding-right)
	&-body
		background-color: var(--cui-background-color)
		display: flex
		flex-direction: column
		flex-grow: 1
		position: static !important
		z-index: unset !important
	&-navigation-button
		height: var(--cui-control-height)
		margin-top: -0.5em
		margin-bottom: -0.5em
		.#{$cui-conf-globalPrefix}button-content
			align-items: center
			display: flex
			gap: calc(var(--cui-gap) * 2)
			padding-left: calc(var(--cui-gap) * 3)
			padding-right: calc(var(--cui-gap) * 3)

	@media (max-width: $breakpoint-max-medium)
		--layout-chrome-bar-width: 0px
		&-bar
			max-width: 100vw
			z-index: unset
		&.view-collapsed &-bar
			height: unset
		&.view-collapsed &-bar-body,
		&.view-collapsed &-bar-footer
			display: none
		&:not(.view-collapsed) &-body
			display: none

	@media (min-width: $breakpoint-min-medium)
		flex-direction: row
		&-bar
			--cui-edge-offset-right: 0em
			background: linear-gradient(to right, var(--cui-background-color) 25%, var(--cui-background-color--below))
			min-width: var(--layout-chrome-bar-width)
			max-width: var(--layout-chrome-bar-width)
		&-bar-body
			padding-left: env(safe-area-inset-left, 0em)
		&-body
			--cui-layout-section-gap: calc(8 * var(--cui-gap))
		&-navigation-button
			display: none

	@media (min-width: $breakpoint-min-large)
		--layout-chrome-bar-width: #{$breakpoint-min-large * $layout-chrome-bar-width-aspect}
